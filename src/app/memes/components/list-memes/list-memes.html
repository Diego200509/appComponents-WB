<app-container>
    <h1>Memes (Imgflip API)</h1>

    <mat-form-field appearance="outline" style="width:360px;max-width:100%;">
        <mat-label>Buscar por nombre</mat-label>
        <input matInput #q (keyup)="applyFilter(q.value)" placeholder="Ej: Drake, Doge..." />
        @if (q.value) {
        <button mat-icon-button matSuffix (click)="clear(q)" aria-label="Limpiar">
            <mat-icon>close</mat-icon>
        </button>
        }
    </mat-form-field>

    @if (loading) {
    <div class="center"><mat-spinner diameter="44"></mat-spinner></div>
    }

    @if (!loading) {
    <app-table [data]="records" [metaDataColumns]="[
        { field: 'name', title: 'Nombre' },
        { field: 'width', title: 'Ancho' },
        { field: 'height', title: 'Alto' },
        { field: 'box_count', title: 'Cuadros' }
    ]">
        <ng-container matColumnDef="thumb">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let m"><img [src]="m.url" alt="meme" class="thumb"></td>
        </ng-container>
        <ng-container matColumnDef="link">
            <th mat-header-cell *matHeaderCellDef>Link</th>
            <td mat-cell *matCellDef="let m">
                <a mat-button color="primary" [href]="m.url" target="_blank" rel="noopener">
                    <mat-icon>open_in_new</mat-icon>&nbsp;Abrir
                </a>
            </td>
        </ng-container>
    </app-table>

    <app-paginator (onChangePage)="ChangePage($event)" [length]="totalRecords"></app-paginator>
    }
</app-container>